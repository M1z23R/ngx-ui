<div
  class="ui-template-input-wrapper"
  [class.ui-template-input-wrapper--error]="error()"
  [class.ui-template-input-wrapper--disabled]="disabled()"
>
  @if (label()) {
    <label class="ui-template-input__label" [attr.for]="inputId()">
      {{ label() }}
      @if (required()) {
        <span class="ui-template-input__required">*</span>
      }
    </label>
  }
  <div
    class="ui-template-input__container"
    (mousemove)="onMouseMove($event)"
    (mouseleave)="onContainerMouseLeave()"
  >
    <div
      class="ui-template-input__mirror"
      #mirror
      [style.padding-right.px]="suffixPadding() || null"
      [innerHTML]="highlightedHtml()"
    ></div>
    <input
      class="ui-template-input__input"
      #inputEl
      [id]="inputId()"
      type="text"
      [style.padding-right.px]="suffixPadding() || null"
      [placeholder]="placeholder()"
      [disabled]="disabled()"
      [readonly]="readonly()"
      [required]="required()"
      [(ngModel)]="value"
      (input)="onInput()"
      (scroll)="syncScroll()"
      (click)="syncScroll()"
      (keydown)="onKeyDown()"
    />
    <div class="ui-template-input__suffix" #suffixEl>
      <ng-content select="[uiTemplateInputSuffix]" />
    </div>
  </div>
  @if (error()) {
    <span class="ui-template-input__error">{{ error() }}</span>
  }
  @if (hint() && !error()) {
    <span class="ui-template-input__hint">{{ hint() }}</span>
  }
</div>

<div
  #popoverRef
  class="ui-tmpl-popover"
  [class.ui-tmpl-popover--open]="popoverVisible()"
  [class.ui-tmpl-popover--above]="openAbove()"
  [class.ui-tmpl-popover--below]="!openAbove()"
  (mouseenter)="onPopoverMouseEnter()"
  (mouseleave)="onPopoverMouseLeave()"
>
  @if (popoverVisible()) {
    @if (popoverTemplate()) {
      <ng-container
        [ngTemplateOutlet]="popoverTemplate()!"
        [ngTemplateOutletContext]="popoverContext()"
      />
    } @else {
      <span class="ui-tmpl-popover__text">{{ popoverText() }}</span>
    }
  }
</div>
